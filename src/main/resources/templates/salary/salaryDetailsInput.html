<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="accTemp :: headerImp ('__給与明細入力__')">
</head>
<body>
	<form name="salaryDetailsInputForm" id="salaryDetailsInputForm"
		method="POST" th:action="@{/salary/detail/save}"
		th:object="${salaryDetailsInputForm}">
		<input type="hidden" th:field="*{employeeId}"/>
		<input type="hidden" th:field="*{salaryYearMonth}"/>
		<div id="headerArea">
			<table>
				<tr>
					<td><span>給与明細入力</span></td>
					<td width="55px" height="25" align="right"><input
						type="submit" name="edit" value="編集"/></td>
					<td width="50px" height="25" align="right"><input
						type="submit" name="delete" value="削除"/></td>
					<td width="50px" height="25" align="right"><input
						type="submit" name="submit" value="登録"/></td>
				</tr>
			</table>
		</div>
		<!--headerArea-->
		<table>
			<tr>
				<td valign="top"></td>
			</tr>
		</table>
		<table>
			<tr>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>基本給</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>役職手当</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>資格手当</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>住宅手当</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>家族手当</span>
				</td>
			</tr>
			<tr height="30">
				<td width="20%" align="right"><input type="text"
					th:field="*{basicSalary}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{positionAllowance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{qualificationAllowance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{houseAllowance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{familyAllowance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
			</tr>
			<tr>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>その他の手当</span></td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>
						非課税交通費</span></td>
				<td width="20%" bgcolor="#CFDDFF" align="right" height="20"><b>
						<span>支給額合計</span>
				</b></td>
			</tr>
			<tr height="30">
				<td width="20%" align="right"><input type="text"
					th:field="*{otherAllowance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{transportFee}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{sum}" maxlength="9" readOnly="readOnly"
					style="width: 75px; color: #777777" /><span>円</span></td>
			</tr>
		</table>
		<table>
			<tr>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>健康保険</span>
					<label><input type="checkbox" id="healthInsuranceFlag"
						name="healthInsuranceFlag"
						th:checked="${salaryDetailsInputForm.healthInsuranceFlag}"
						onchange="healthInsuranceFlagChange()" /><span>手入力</span></label></td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>厚生年金</span>
					<label><input type="checkbox" id="welfareInsuranceFlag"
						name="welfareInsuranceFlag"
						th:checked="${salaryDetailsInputForm.welfareInsuranceFlag}"
						onchange="welfareInsuranceFlagChange()" /><span>手入力</span></label></td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>雇用保険</span>
					<label><input type="checkbox" id="employInsuranceFlag"
						name="employInsuranceFlag"
						th:checked="${salaryDetailsInputForm.employInsuranceFlag}"
						onchange="employInsuranceFlagChange()" /><span>手入力</span></label></td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>社会保険合計</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>所得税</span>
				</td>
			</tr>
			<tr height="30">
				<td width="20%" align="right"><input type="text"
					th:field="*{healthInsurance}" id="healthInsurance" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" />
					<span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{welfarePension}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{employmentInsurance}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{socialInsuranceSum}" maxlength="9"
					style="width: 75px; color: #777777" readOnly="readOnly" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{incomeTax}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
			</tr>
			<tr>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>住民税</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>旅行積立金</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>借入等返済</span></td>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>年末控除</span>
				</td>
				<td width="20%" bgcolor="#CFDDFF" align="right" height="20"><span>家賃控除</span>
				</td>
			</tr>
			<tr height="30">
				<td width="20%" align="right"><input type="text"
					th:field="*{inhabitantTax}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{travelFund}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{repaymentBorrowings}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{yearendDeduction}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{rentDeduction}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
			</tr>
			<tr>
				<td width="20%" bgcolor="#CFDDFF" align="center" height="20"><span>
						その他の控除</span></td>
				<td width="20%" bgcolor="#CFDDFF" align="right" height="20"><b>
						<span>控除額合計</span>
				</b></td>
			</tr>
			<tr height="30">
				<td width="20%" align="right"><input type="text"
					th:field="*{otherDeduction}" maxlength="9"
					style="width: 75px; color: #777777" onchange="autoCalculate()" /><span>円</span></td>
				<td width="20%" align="right"><input type="text"
					th:field="*{totalDeductibleSum}" maxlength="9"
					style="width: 75px; color: #777777" readOnly="readOnly"
					onchange="autoCalculate()" /><span>円</span></td>
			</tr>
		</table>

		<table>
			<tr>
				<td bgcolor="#D9C8FF" align="left" height="20"><b>差引支給額<span>
					</span>
				</b></td>
			</tr>
			<tr height="30">
				<td width="20%" align="left"><input type="text"
					th:field="*{subscriptionAmount}" maxlength="9" readOnly="readOnly"
					style="width: 75px; color: #777777" /><span>円</span></td>
			</tr>
		</table>

	</form>

</body>
<script type="text/javascript">
	window.onload = function() {
		document.getElementById("healthInsurance").setAttribute("readonly",
				false);
		document.getElementById("welfarePension").setAttribute("readonly",
				false);
		document.getElementById("employmentInsurance").setAttribute("readonly",
				false);
	}
	function healthInsuranceFlagChange() {
		if (document.getElementById('healthInsuranceFlag').checked) {
			document.getElementById("healthInsurance").removeAttribute(
					"readonly");
		} else {
			document.getElementById("healthInsurance").setAttribute("readonly",
					false);
		}
	}
	function welfareInsuranceFlagChange() {
		if (document.getElementById('welfareInsuranceFlag').checked) {
			document.getElementById("welfarePension").removeAttribute(
					"readonly");
		} else {
			document.getElementById("welfarePension").setAttribute("readonly",
					false);
		}
	}
	function employInsuranceFlagChange() {
		if (document.getElementById('employInsuranceFlag').checked) {
			document.getElementById("employmentInsurance").removeAttribute(
					"readonly");
		} else {
			document.getElementById("employmentInsurance").setAttribute(
					"readonly", false);
		}
	}
	function autoCalculate() {
		var totalSalary = 0;
		var totalDeduction = 0;
		var totalInsurance = 0;
		var basicSalary = document.getElementById("basicSalary").value;
		if (isNaN(basicSalary)) {
			basicSalary = 0;
		}
		totalSalary = totalSalary + parseInt(basicSalary);
		var positionAllowance = document.getElementById("positionAllowance").value;
		if (isNaN(positionAllowance)) {
			positionAllowance = 0;
		}
		totalSalary = totalSalary + parseInt(positionAllowance);
		var qualificationAllowance = document
				.getElementById("qualificationAllowance").value;
		if (isNaN(qualificationAllowance)) {
			qualificationAllowance = 0;
		}
		totalSalary = totalSalary + parseInt(qualificationAllowance);
		var houseAllowance = document.getElementById("houseAllowance").value;
		if (isNaN(houseAllowance)) {
			houseAllowance = 0;
		}
		totalSalary = totalSalary + parseInt(houseAllowance);
		var familyAllowance = document.getElementById("familyAllowance").value;
		if (isNaN(familyAllowance)) {
			familyAllowance = 0;
		}
		totalSalary = totalSalary + parseInt(familyAllowance);
		var otherAllowance = document.getElementById("otherAllowance").value;
		if (isNaN(otherAllowance)) {
			otherAllowance = 0;
		}
		totalSalary = totalSalary + parseInt(otherAllowance);
		var transportFee = document.getElementById("transportFee").value;
		if (isNaN(transportFee)) {
			transportFee = 0;
		}
		totalSalary = totalSalary + parseInt(transportFee);
		var healthInsurance = document.getElementById("healthInsurance").value;
		if (isNaN(healthInsurance)) {
			healthInsurance = 0;
		}
		totalDeduction = totalDeduction + parseInt(healthInsurance);
		totalInsurance = totalInsurance + parseInt(healthInsurance);
		var welfarePension = document.getElementById("welfarePension").value;
		if (isNaN(healthInsurance)) {
			welfarePension = 0;
		}
		totalDeduction = totalDeduction + parseInt(welfarePension);
		totalInsurance = totalInsurance + parseInt(welfarePension);
		var employmentInsurance = document
				.getElementById("employmentInsurance").value;
		if (isNaN(healthInsurance)) {
			employmentInsurance = 0;
		}
		totalDeduction = totalDeduction + parseInt(employmentInsurance);
		totalInsurance = totalInsurance + parseInt(employmentInsurance);
		var incomeTax = document.getElementById("incomeTax").value;
		if (isNaN(incomeTax)) {
			incomeTax = 0;
		}
		totalDeduction = totalDeduction + parseInt(incomeTax);
		var inhabitantTax = document.getElementById("inhabitantTax").value;
		if (isNaN(inhabitantTax)) {
			inhabitantTax = 0;
		}
		totalDeduction = totalDeduction + parseInt(inhabitantTax);
		var travelFund = document.getElementById("travelFund").value;
		if (isNaN(travelFund)) {
			travelFund = 0;
		}
		totalDeduction = totalDeduction + parseInt(travelFund);
		var repaymentBorrowings = document
				.getElementById("repaymentBorrowings").value;
		if (isNaN(repaymentBorrowings)) {
			repaymentBorrowings = 0;
		}
		totalDeduction = totalDeduction + parseInt(repaymentBorrowings);
		var yearendDeduction = document.getElementById("yearendDeduction").value;
		if (isNaN(yearendDeduction)) {
			yearendDeduction = 0;
		}
		totalDeduction = totalDeduction + parseInt(yearendDeduction);
		var rentDeduction = document.getElementById("rentDeduction").value;
		if (isNaN(rentDeduction)) {
			rentDeduction = 0;
		}
		totalDeduction = totalDeduction + parseInt(rentDeduction);
		var otherDeduction = document.getElementById("otherDeduction").value;
		if (isNaN(otherDeduction)) {
			otherDeduction = 0;
		}
		totalDeduction = totalDeduction + parseInt(otherDeduction);

		document.getElementById("sum").value = totalSalary;
		document.getElementById("totalDeductibleSum").value = totalDeduction;
		document.getElementById("socialInsuranceSum").value = totalInsurance;
		var subscriptionAmount = totalSalary - totalDeduction;
		document.getElementById("subscriptionAmount").value = subscriptionAmount;
	}
</script>
</html>
